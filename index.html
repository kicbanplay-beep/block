<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>UnBlock Chat</title>
<style>
body { font-family: Arial; background: #2c003e; color: #fff; }
.container { width: 400px; margin: 50px auto; }
input, button { padding: 10px; margin: 5px 0; width: 100%; border: none; border-radius: 5px; }
button { background: #8a2be2; color: #fff; cursor: pointer; }
#chat { height: 300px; overflow-y: auto; border: 1px solid #8a2be2; padding: 10px; margin-bottom: 10px; }
.message { margin: 5px 0; }
</style>
</head>
<body>
<div class="container">
  <h2>UnBlock Chat</h2>
  <div id="auth">
    <input id="username" placeholder="Имя">
    <input id="password" type="password" placeholder="Пароль">
    <button onclick="register()">Регистрация</button>
    <button onclick="login()">Войти</button>
  </div>
  <div id="chat-container" style="display:none;">
    <div id="chat"></div>
    <input id="msg" placeholder="Написать сообщение...">
    <button onclick="sendMessage()">Отправить</button>
  </div>
</div>

<script>
let ws;
let username;

function connect() {
    ws = new WebSocket("wss://<your-render-app>.onrender.com");
    ws.onmessage = (e) => {
        const data = JSON.parse(e.data);
        if(data.type === "message") {
            const chat = document.getElementById("chat");
            const div = document.createElement("div");
            div.className = "message";
            div.textContent = ${data.username}: ${data.message};
            chat.appendChild(div);
            chat.scrollTop = chat.scrollHeight;
        }
    }
}

function register() {
    username = document.getElementById("username").value;
    const password = document.getElementById("password").value;
    ws.send(JSON.stringify({type:"register", username, password}));
}

function login() {
    username = document.getElementById("username").value;
    const password = document.getElementById("password").value;
    ws.send(JSON.stringify({type:"login", username, password}));
    document.getElementById("auth").style.display = "none";
    document.getElementById("chat-container").style.display = "block";
}

function sendMessage() {
    const msg = document.getElementById("msg").value;
    ws.send(JSON.stringify({type:"message", username, message: msg}));
    document.getElementById("msg").value = "";
}

connect();
</script>
</body>
</html>
