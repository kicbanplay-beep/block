<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WebSocket Chat</title>
    <style>
        body { font-family: Arial, sans-serif; background: #222; color: #eee; display: flex; flex-direction: column; align-items: center; margin: 0; padding: 0; height: 100vh; }
        #chat { width: 80%; max-width: 600px; flex: 1; overflow-y: auto; border: 1px solid #555; padding: 10px; margin: 10px 0; background: #111; }
        #inputArea { display: flex; width: 80%; max-width: 600px; }
        #msg { flex: 1; padding: 10px; border: 1px solid #555; background: #333; color: #eee; }
        button { padding: 10px 20px; margin-left: 5px; background: #444; border: 1px solid #555; color: #eee; cursor: pointer; }
        button:hover { background: #555; }
    </style>
</head>
<body>

<h2>WebSocket Chat</h2>
<div id="chat"></div>
<div id="inputArea">
    <input type="text" id="msg" placeholder="–í–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ..." />
    <button onclick="sendMessage()">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
</div>

<script>
let ws;

function addLog(message) {
    const chat = document.getElementById("chat");
    const p = document.createElement("p");
    p.textContent = message;
    chat.appendChild(p);
    chat.scrollTop = chat.scrollHeight;
}

function connect() {
    ws = new WebSocket("wss://rdr-io.onrender.com");

    ws.onopen = () => {
        console.log("Connected!");
        addLog("‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω–æ –∫ —Å–µ—Ä–≤–µ—Ä—É");
    };

    ws.onmessage = (event) => {
        addLog("üí¨ –°–µ—Ä–≤–µ—Ä: " + event.data);
    };

    ws.onclose = () => {
        console.log("WebSocket closed, reconnecting in 3s...");
        addLog("‚ùå –°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∑–∞–∫—Ä—ã—Ç–æ. –ü–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ...");
        setTimeout(connect, 3000);
    };

    ws.onerror = (err) => {
        console.error("WebSocket error:", err);
    };
}

function sendMessage() {
    const input = document.getElementById("msg");

    if (ws.readyState === WebSocket.OPEN) {
        ws.send(input.value);
        addLog("üó® –í—ã: " + input.value);
        input.value = "";
    } else if (ws.readyState === WebSocket.CONNECTING) {
        alert("–°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –µ—â—ë —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è, –ø–æ–¥–æ–∂–¥–∏—Ç–µ...");
    } else {
        alert("WebSocket –∑–∞–∫—Ä—ã—Ç. –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–∏—Ç—Å—è.");
    }
}

connect();
</script>

</body>
</html>
